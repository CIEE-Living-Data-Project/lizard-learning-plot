---
title: "Lizard Learning Plot Manuscript"
author: "Caleigh Charlebois"
date: "2022-09-15"
output: pdf_document
latex_engine: "xelatex"
geometry: margin=1in
csl: "../references/biology-letters.csl"
bibliography: "../references/lizard_learning_plot.bib"

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

## Use groundhog to ensure package compatibility by loading most recent
## versions of packages available on a certain date.

# Check whether groundhog is installed and install it if it isn't.
my_packages <- c("groundhog")
not_installed <- my_packages[!(my_packages %in% installed.packages()[ , "Package"])]
if(length(not_installed)) install.packages(not_installed) 
rm(not_installed, my_packages)

# Load groundhog and use it to install other packages. You may change the date
# in the "date_for_packages" if you want to check results using another set of
# plugin versions.
date_for_packages <- "2022-09-11"
library(groundhog)
groundhog.library(c("ggplot2",
                    "readr",
                    "cowplot",
                    "dplyr"),
                  date_for_packages)
rm(date_for_packages, r.need.full)

# Read vector with names of data files (with dates added by data downloading 
# script) that can be indexed to get the names of both data files in the
# directory.

data_names <- read_lines("../data/data_names.txt")

```

**Title:** Lizard Learning Plot

Caleigh Charlebois


# Abstract

# Introduction



# Methods

# Results
```{r}
# Load the first lizard learning dataset

lizards_1 <- read_csv(paste0("../", data_names[1]))

ggplot( data = lizards_1, mapping = aes()) +
  geom_histogram(aes(x=LT)) +
  facet_grid(rows = vars(Age))
```
This was my initial plan -- Making a plot of the distribution of number of trials it took for the lizards to perform the task correctly, faceted by age. However, without polishing the plot and fixing the labels, I can see it won't be very exciting and isn't the best way to visualize this data.I didn't realize when I was making my plan that the  lizards would all learn the task in either 0 or 1 trial. 

What else can I make a plot of which will be more interesting?

```{r}
# Create a labelling function that will allow me to choose more readable facet
# labels for  "Age" and "Treatment" functions. Otherwise, the facets will be
# labeled using the abbreviations the authors chose. For example, simply "O"
# for "Old" and "SL" for "social demonstration."

age_labels <- list(
  'Y'='Young',
  'O'='Old'
)

plot_labeller <- function(variable, value){
  if (variable=='Age') {
    return(age_labels[value])
  } else {
    return(treat_labels[value])
  }
}

treat_labels <- list(
  'SL' = 'Social Demonstration',
  'C' = 'Control'
)

treat_labeller <- function(variable, value){
  return(treat_labels[value])
}

# Create a plot of the data with ggplot, facet with the facet_grid function,
# and use the cowplot theme. Specify the labeler I created above.

ggplot(data = lizards_1, mapping = aes()) +
  geom_histogram(aes(x=Lat_min1)) +
  facet_grid(rows = vars(Age),
             cols = vars(Treat),
             labeller = plot_labeller) +
  labs(x="Time until correctly performed task",
       y="Lizard count") +
  theme_cowplot()

```
I chose to make the x axis the time elapsed until the lizard correctly performed the task rather than simply whether they performed it correctly or not. I also changed the theme of the plot to the cowplot theme, which is visually cleaner.

I find this idea pretty interesting, but I notice there are many data points at "60." I think this is because lizards who never completed the task correctly were recorded as taking 60 seconds, the maximum allotted time. Next, I will try creating a plot that removes lizards which never succeeded in performing the task by filtering the data.

```{r}
filter(lizards_1, correct.incorrect==1) %>%

ggplot(mapping = aes()) +
  geom_histogram(aes(x=Lat_min1),
                 binwidth = 1) +
  facet_grid(rows = vars(Age),
             cols = vars(Treat),
             labeller = plot_labeller) +
  labs(x="Time until correctly performed task",
       y="Lizard count") +
  theme_cowplot()
```

This plot gives a better idea of the distribution of task completion times for young and old lizards. Based on this plot alone, it appears that a higher percentage of old lizards performed the task more quickly when social demonstration was available, while younger lizards tended to perform the task more quickly without social demonstration. However, it is worth noting that in this step, I removed lizards that didn't learn the task at all.

```{r}
filter(lizards_1, Liz.ID=="*0302")
```
Here, I have filtered the dataset by the "Liz.ID" variable because I was curious about the structure of the data. This has revealed something I didn't understand about the data before: Each entry is not a lizard, it's a specific trial the lizard underwent. Even though the data dictionary available on Dryad says that the "LT" or "Learning Trial" variable is "trials until the lizard learnt," it is only a binary entry. 
Maybe this means the variable is "1" when the lizard hasn't yet learned the task, and "0" once it has learned the task? I still find this confusing because the example lizard here appears to have correctly performed the task during trial 4 according to the "correct.incorrect" column. 

# Discussion

# References

# Tables

# Figure Captions

# Figures

# Appendices
